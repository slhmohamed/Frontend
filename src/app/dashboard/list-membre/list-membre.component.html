<div class="min-height-300 bg-primary position-absolute w-100"></div>
<aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 " id="sidenav-main">
  <div class="sidenav-header">
    <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
    <a class="navbar-brand m-0"  >
      <img src="../../../assets/images/agil.png" class="navbar-brand-img h-100" alt="main_logo">
      <span class="ms-1 font-weight-bold">Gestion des impayés</span>
    </a>
  </div>
  <hr class="horizontal dark mt-0">
  <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
    <ul class="navbar-nav">
      <li class="nav-item" routerLink="/list-membre" *ngIf="role=='Admin'">
        <a class="nav-link active " routerLink="/list-membre">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Liste utilisateur</span>
        </a>
      </li>
      <li class="nav-item" routerLink="/list-client" >
        <a class="nav-link "  routerLink="/list-client" >
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-calendar-grid-58 text-warning text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Liste  client</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link  "  routerLink="/list-impayé">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-calendar-grid-58 text-warning text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Impayé</span>
        </a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link " routerLink="/profil">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-app text-info text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Profil</span>
        </a>
      </li>
    
    
    
      <li class="nav-item">
        <a class="nav-link " style="cursor: pointer;"  (click)="logout()">
          <div class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-world-2 text-danger text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Logout</span>
        </a>
      </li>
   
    </ul>
  </div>
  
</aside>
<main class="main-content position-relative border-radius-lg ">
  <!-- Navbar -->
  <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl " id="navbarBlur" data-scroll="false">
    <div class="container-fluid py-1 px-3">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
          <li class="breadcrumb-item text-sm"><a class="opacity-5 text-white" >Dashboard</a></li>
          <li class="breadcrumb-item text-sm text-white active" aria-current="page">Liste utilisateur</li>
        </ol>
        <h6 class="font-weight-bolder text-white mb-0">Liste utilisateur</h6>
      </nav>
      <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
        <div class="ms-md-auto pe-md-3 d-flex align-items-center">
           
        </div>
         
      </div>
    </div>
  </nav>
  <!-- End Navbar -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-12">
        <div class="card mb-4">
          <div class="card-header pb-0 headers">
            <h6>Liste responsable</h6><button class="btn btn-primary" (click)="open()" > Ajouter responsable</button>
          </div>
          <div class="card-body px-0 pt-0 pb-2">
            <div class="table-responsive p-0">
              <table class="table align-items-center mb-0">
                <thead>
                <tr>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Nom</th>
                  <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Prenom</th>
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Email</th>
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Role</th>
                  <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Date creation</th>
                  <th class="text-secondary opacity-7"></th>
                </tr>
                </thead>
                <tbody>
                    <ng-container *ngFor="let item of users">
                        <tr>
                            <td>
                              <div class="d-flex px-2 py-1">
                                 
                                <div class="d-flex flex-column justify-content-center">
                                  <h6 class="mb-0 text-sm">{{item.firstName}} </h6>
                                  
                                </div>
                              </div>
                            </td>
                            <td>
                                <p class="text-xs font-weight-bold mb-0" style="text-align: center;">{{item.lastName}}</p>
                                 
                              </td>
                            <td>
                              <p class="text-xs font-weight-bold mb-0" style="text-align: center;">{{item.email}}</p>
                               
                            </td>
                            <td class="align-middle text-center text-sm">
                                <ng-container *ngIf="item.role=='Admin'">
                                
                              <span class="badge badge-sm bg-gradient-success">{{item.role}}</span>
                            </ng-container>
                            <ng-container *ngIf="item.role!='Admin'">
                                <span class="badge badge-sm bg-gradient-secondary">Responsable{{item.role}}</span>
                              </ng-container>
                            </td>
                            <td class="align-middle text-center">
                              <span class="text-secondary text-xs font-weight-bold">{{item.createdAt|date:'dd-MM-yyyy'}}</span>
                            </td>
                            <td class="align-middle">
                                
                                    <a (click)="delete(item._id)" href="javascript:;" class="text-secondary font-weight-bold text-xs" data-toggle="tooltip" data-original-title="Edit user">
                                        Supprimer
                                      </a>
                                  
                                  
                            </td>
                          </tr>
                        
                    </ng-container>
                    
              
                
               
               
           
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <footer class="footer pt-3  ">
      <div class="container-fluid">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6 mb-lg-0 mb-4">
          </div>
          <div class="col-lg-6">
            <ul class="nav nav-footer justify-content-center justify-content-lg-end">

            </ul>
          </div>
        </div>
      </div>
    </footer>
  </div>
</main>
<div class="modal fade my-modal" tabindex="-1" role="dialog" #myModal>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
          
 
         <button type="button" class="close" (click)="close()" aria-label="Close"><span aria-hidden="true">&times;</span>
         </button>
      </div>
      <div class="modal-body">
    
        <section class="container">
          <header>Ajouter responsabler</header>
          <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="form">
            <div class="column">
              <div class="input-box">
                <label>Nom</label>
                <input  formControlName="firstName" type="text" placeholder="Entrer nom" required />
              </div>
              <div class="input-box">
                <label>Prénom</label>
                <input  formControlName="lastName" type="text" placeholder="Entrer prénom" required />
              </div>
            </div>
            <div class="input-box">
              <label>Email Adresse</label>
              <input formControlName="email" type="email" placeholder="Enter email address" required />
            </div>
            <div class="input-box">
              <label>Mot de passe</label>
              <input formControlName="hashed_password" type="password" placeholder="Enter mot de passe" required />
            </div>
            <div class="column">
              <div class="input-box">
                <label>Télephone</label>
                <input formControlName="phone" type="number" placeholder="Enter phone number" required />
              </div>
              <div class="input-box">
                <label>Role</label>
                <div class="select-box">
                  <select formControlName="role" (change)="onChange($event.target.value)">
                    <option hidden>Role</option>
                    <option value="Commerciaux">Responsale commerciaux </option>
                    <option value="Admin">Admin</option>
                    <option value="Précontentieux">Responsale précontentieux </option>
                    <option value="Financier">Responsale financier </option>
                  </select>
                </div>
              </div>

              <div class="input-box" *ngIf="commerciaux">
                <label>Type de commerciaux</label>
                <div class="select-box">
                  <select formControlName="type" >
                    <option hidden>Type de commerciaux</option>
                    <option value="DVD">DVD </option>
                    <option value="GAZ">GAZ</option>
                    <option value="RESEAU">RESEAU </option>
                
                  </select>
                </div>
              </div>
            </div>
          
            <button type="submit">Submit</button>
          </form>
        </section>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary"  (click)="close()" >Close
        </button>
      </div>
    </div>
  </div>
</div>